<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="7tTF0t5uCMnyE6X31OIOQpcOf4QxWuODtyZLoVsKCEc" />
  <meta name="msvalidate.01" content="7FC9C7BCD4002EBD89AAC2EF63D7B353" />
  <link rel="icon" type="image/png" href="favicon48.png" sizes="48x48">
  <meta name='description' content='Support global device settings.'>
  <title>Device Element</title>
  <link Content-Type="text/css" href="/docstyle.css" rel="stylesheet" />
  <script src="/pages.js"></script>
  <script src="/story.js" type="module"></script>
  <style>
  .gpio { 
    display:inline-block;
    padding: 0 4px;
    border-radius: 4px;
    }
  .gpio.yellow {background-color: #FF0;}
  .gpio.red {background-color: #F22; color:white}
  .gpio.black {background-color: #111; color:white}
  .gpio.blue {background-color: #22F; color:white}
  </style>
</head>

<body scroll="0" style="padding:0;">
  <div class="u-navbar" style="margin-bottom: 0;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="menuButton" class="button" style="height:1.4rem">
      <path fill="white" d="M0 8h48v6H0zm0 13h48v6H0zm0 13h48v6H0z" />
    </svg>

    <a href="/index.htm" class="button">Home</a>
    <a href="/concepts/index.htm" class="button">Concepts</a>
    <a href="/elements/index.htm" class="button">Elements</a>
    <a href="/boards/index.htm" class="button">Boards</a>
    <a href="/recipes/index.htm" class="button">Recipes</a>
  </div>

  <nav class="inpage open"></nav>

  <main style="padding:1rem;max-width: 800px;">
    <h1>Device Element</h1>

    
    
      <div class="iconcard"><svg class="icon"><use href="/icons.svg#device"></use></svg>
    
    The DeviceElement allows configuration of the behavior of the device and the features offered by the board class.
</div>
      
    <p>By specifying the configuration for the <code>device</code> element the general settings for the device can be controlled.</p>
<h2>Element Configuration</h2>
<p>The following properties are available for configuration of the element.</p>
<p><object data="/element.svg?device" type="image/svg+xml"></object></p>
<h3>Basic settings</h3>
<blockquote>
<p><strong>name</strong> - The device name is specifying the hostname that is used to register the device on the network.
The device can be accessed by any browser on the same network using the URL <code>http://&lt;name&gt;</code>.</p>
<p><strong>rebootTime</strong> (time) - Specifies the duration after the device is rebooted to fully clean up the memory.</p>
<p><strong>logLevel</strong> - By specifying a logLevel for the device <strong>all</strong> elements will use this loglevel
to output debug messages over the Serial interface and into the system log file.
See also <a href="/dev/logger.htm">Device Logging</a>.</p>
<p><strong>logFile</strong> (boolean) - set to 1/true to enable storing lines from the system log to files. default: 0</p>
<p><strong>onSysStart</strong> (actions) - These actions are dispatched when the elements are activated. Element that require a &gt; valid local time are not started at this point.</p>
<p><strong>onStart</strong> (actions) - These actions are dispatched when all elements are active.</p>
<p><strong>sd</strong> - The mDNS based service discovery can be switched off by setting this property to <code>false</code>.</p>
<p><strong>safemode</strong> (boolean) - This value can be set to 0/false to not use the safemode. See [safemode description](/dev/&gt; <a href="http://safemode.md">safemode.md</a>).</p>
</blockquote>
<p>From the base element implementation the following properties are available for configuration:</p>
<blockquote>
<p><strong>title</strong> - Caption text for the element. Used by the element specific cards on the dash boards.</p>
<p><strong>description</strong> - A line of text that gives a short description of the device used in the web UI.</p>
<p><strong>room</strong> - The location of the device.</p>
<p><strong>loglevel</strong> - This property holds the element specific log level. The default value is LOGGER_LEVEL_ERR == 1.</p>
</blockquote>
<h3>WiFi-Manager and Startup settings</h3>
<blockquote>
<p><strong>led</strong> - The GPIO pin of the system LED. Defaults is <code>no LED</code>.</p>
<p><strong>button</strong> - The GPIO pin of the system button. Defaults is ‘GPIO0(D3)’</p>
<p><strong>connectTime</strong> - The available time after a reboot of the device to start network configuration. Default: “6s”.</p>
</blockquote>
<p>Detailed description for <code>ConnectTime</code>, <code>button</code> and <code>led</code> see <a href="/dev/wifimanager.htm">WiFiManager</a>.</p>
<h3>I2C bus</h3>
<p>Many connected sensors and displays are connected via the I2C bus. This bus must be initialized according to the onboard wiring by using the right SDA and SCL pins.</p>
<p>Because there is only 1 bus available in the Arduino boards the configuration is done centrally in the device.</p>
<blockquote>
<p><strong>I2C-SDA</strong> - the data line of the i2c bus.</p>
<p><strong>I2C-SCL</strong> - the clock line of the i2c bus.</p>
<p><strong>I2C-frequency</strong> - the clock speed on the i2c bus in Hz. Default is <code>100000</code> Hz. Can be reduced or changed up to <code>1000000</code> Hz.</p>
</blockquote>
<p>The device Element is only defining what pins are used for the I2C bus but does no further initialization.</p>
<p>More hints on the I2C bus implementation see <a href="/dev/i2c.htm">I2C</a></p>
<h3>Web UI</h3>
<blockquote>
<p><strong>homepage</strong> - When the device starts in normal mode this page will be shown
when opening the device web UI using the url without specifying the page.
This defaults to <code>/index.htm</code></p>
<p><strong>cache</strong> - This property can be used to replace the default http <code>cache-control</code> header
for accessing the static files by a custom value.
The default cache header is <code>&quot;no-cache&quot;</code> that is good while developing and configuring.
But when have a stable configuration caching can be switched on using a value like <code>&quot;max-age=120&quot;</code></p>
</blockquote>
<h3>Deep Sleep mode</h3>
<blockquote>
<p><strong>sleep</strong> - To start a deep sleep a <code>sleep</code> action needs to be send to the device element.
A <code>sleep=false</code> action will disable any sleep mode until next restart.
See also <a href="/dev/deepsleep.htm">deep sleep mode</a>.</p>
<p><strong>nosleep</strong> -  To block any deep sleep on the device
until the next reboot a <code>nosleep</code> action can be send to the device element.</p>
<p><strong>sleeptime</strong> (time) -  The duration the device sleeps when a sleep action was sent.</p>
</blockquote>
<h2>Control the Device</h2>
<p>The following action is implemented:</p>
<blockquote>
<p><strong>reset</strong> - This action wil immediately restart the device like using a reset button.
No settings are changed or cleared.</p>
</blockquote>
<!-- reset , restart ??? -->
<h3>Configuration Example</h3>
<p>This example shows how to configure this element:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"device"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"loglevel"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"wmleaks"</span><span class="token punctuation">,</span><br>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Water Leakage"</span><span class="token punctuation">,</span><br>      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Monitor water leaks at the washing machine"</span><span class="token punctuation">,</span><br>      <span class="token property">"room"</span><span class="token operator">:</span> <span class="token string">"Cellar"</span><span class="token punctuation">,</span><br>      <span class="token property">"reboottime"</span><span class="token operator">:</span> <span class="token string">"24h"</span><span class="token punctuation">,</span><br>      <span class="token property">"sleeptime"</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span><br>      <span class="token property">"led"</span><span class="token operator">:</span> <span class="token string">"D0"</span><span class="token punctuation">,</span><br>      <span class="token property">"button"</span><span class="token operator">:</span> <span class="token string">"D3"</span><span class="token punctuation">,</span><br>      <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"ding-info.htm"</span><span class="token punctuation">,</span><br>      <span class="token property">"logfile"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"I2C-SDA"</span> <span class="token operator">:</span> <span class="token string">"D4"</span><span class="token punctuation">,</span><br>      <span class="token property">"I2C-SCL"</span> <span class="token operator">:</span> <span class="token string">"D5"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2>See also</h2>
<ul>
<li><a href="/dev/wifimanager.htm">WiFiManager</a></li>
<li><a href="/dev/logger.htm">Device Logging</a></li>
<li><a href="/dev/deepsleep.htm">deep sleep mode</a></li>
<li>Cache-control http header : <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control</a></li>
</ul>


    
    <h2>Tags</h2>
    <div class="taglist"><a href="/tag/element.htm">Element</a><a href="/tag/system.htm">System</a></div>
    
  </main>

  <script>
    var mbObj = document.querySelector('#menuButton');
    var navObj = document.querySelector('nav');

    navObj.classList.toggle('open', (window.innerWidth > 880));

    mbObj.addEventListener('click', function (e) {
      navObj.classList.toggle('open');
    });

    lazyLoadHTM('nav', '/toc.htm');
  </script>
  
  </body>

</html>