---
title: Touch Element
tags: ["Element", "Input"]
layout: "page.njk"
excerpt: >
  The TouchElement enables creating Actions by using touch input on the ESP32.
---

The touch functionality of the ESP32 is based on meassuring
the capacity resistance on a free floating pad that changes when e.g. a finger
gets nearby. This allows really cheap input implementations.

The touch functionality is not available on ESP8266 processor so this element will not be part of a ESP8266 firmware.

When using an ESP8266 or other processors there are sensor boards using special chips or transistors to create a binary signal from a touch gesture.
For these solutions a simple [DigitalInput Element] can be used as input element.

There are also touch sensors implementations available that use 2 pins to probe for the capacity resistance using a ADC.
But there is only one ADC input in the ESP8266 processors available.


## Connecting a Touch Sensor

A touch sensor is built by a simple electrically conductive area.
This allows detecting a finger or a equivalent object nearby as this changes the capacity resistance.
It is actually not required to create a electric contact with the finger and is recommended to add a isolating on to of the area.

The ESP32 processors supports a capacitive touch detection on most GPIOs in the chip
that can be used to replace momentary buttons by simple pads. The value generated by the touch input is typically varying between 40 and 80 while
lower numbers are created when the capacity is higher caused by the finger nearby.
A reference value can be set to create the binary value that is HIGH(1) when touched and LOW(0) otherwise.



## Element Configuration

<object data="/element.svg?touch" type="image/svg+xml"></object>

**pin**\* -- the GPIO pin used for input.

**reference** -- the reference value that is used to compare touch vs no-touch capacity values. The default setting is 65.

**onHigh** -- These actions are emitted when the logical level is switched to `1`.

**onLow** -- These actions are emitted when the logical level is switched to `0`.

**onValue** -- These actions are emitted when the logical level is switched.

{% include "./elementproperties.md" %}

\* This parameter must be specified.


### Configuration Example

This example shows how to configure this element:

``` json
{
  "touch": {
    "4": {
      "title": "touch",
      "description": "touch sensor",
      "pin": "4",
      "onvalue": "digitalout/led?value=$v"
    }
  },
  "digitalout": {
    "led": {
      "pin": "27",
      "inverse": "1"
    }
  },
}
```


## State

The state of the TouchElement Element available at runtime includes the current values:

**active** - Is set to true when the Element is active.

**value** - The current output value from the generated pulse.


### Example State

``` json
{
  "touch/4": {
    "active":"true",
    "value":"0"
  },
}
```


## See also

* <https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/touch_pad.html>
* <https://randomnerdtutorials.com/esp32-touch-pins-arduino-ide/>


[DigitalInput Element]: /elements/digitalin.md