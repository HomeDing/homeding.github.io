<template><svg xmlns='http://www.w3.org/2000/svg'viewBox='-24 -24 48 48'><g id='panel'transform='translate(0, 10)'></g><g id='needle'transform='translate(0, 10) rotate(0)'><rect width='12'height='1'x='-23'y='-0.5'/></g><g id='values'><text id='title'x='0'y='-18'></text><text id='minimum'x='-16'y='13'></text><text id='maximum'x='16'y='14'></text><text id='value'x='0'y='12'></text><text id='units'x='0'y='18'></text></g></svg></template><style scoped>:host{display:inline-block;width:300px;aspect-ratio:1;--fontSize:3px;--strokeWidth:.2}svg{font-family:sans-serif}.segment{stroke:#fff;stroke-width:var(--strokeWidth)}text{fill:black;stroke:0;font-size:3px;text-anchor:middle;dominant-baseline:middle}#needle{transition:transform .5s}</style><script>export default class UGaugeChart extends UComponent{#t=22;#i=12;panelObj=this.shadowRoot.getElementById("panel");valuesObj=this.shadowRoot.getElementById("values");#e={fontSize:"6px",strokeWidth:.2,title:"t",minimum:"mi",maximum:"ma",units:"ut",segments:[{color:"#4040ff"}]};#o=this.#e;#s(t,i){return String(Math.sin(t)*i)+","+String(-Math.cos(t)*i)}#n(t,i,e,o){var s=document.createElementNS("http://www.w3.org/2000/svg",i);return e&&Object.getOwnPropertyNames(e).forEach((function(t){s.setAttribute(t,e[t])})),o&&(s.textContent=o),t.appendChild(s),s}#h(t){Array.from(t.childNodes).forEach((function(t){t.remove()}))}_drawSegment(t,i,e){var o=Math.PI*(t-.5),s=Math.PI*(i-.5),n="";n+="M"+this.#s(o,this.#t),n+="A"+this.#t+","+this.#t,n+=" 0 0 1 ",n+=this.#s(s,this.#t),n+="L"+this.#s(s,this.#i),n+="A"+this.#i+","+this.#i,n+=" 0 0 0 ",n+=this.#s(o,this.#i),n+="Z";this.#n(this.panelObj,"path",{class:"segment",style:"fill: "+e,d:n})}clear(){this.draw()}setOptions(t){this.#o=Object.assign({},this.#o,t),this.shadowRoot.querySelector("#title").textContent=this.#o.title,this.shadowRoot.querySelector("#minimum").textContent=this.#o.minimum,this.shadowRoot.querySelector("#maximum").textContent=this.#o.maximum,this.shadowRoot.querySelector("#units").textContent=this.#o.units,this.#h(this.panelObj);var i=this.#o.maximum-this.#o.minimum,e=this.#o.minimum;this.#o.segments.forEach((t=>{var o=t.value||this.#o.maximum;this._drawSegment((e-this.#o.minimum)/i,(o-this.#o.minimum)/i,t.color),e=o})),this.style.setProperty("--fontSize",this.#o.fontSize),this.style.setProperty("--strokeWidth",this.#o.strokeWidth)}draw(t=NaN){var i=Number(t),e=-20;null==t||isNaN(t)?t="":e=i<this.#o.minimum?-20:i>this.#o.maximum?200:180*(i-this.#o.minimum)/(this.#o.maximum-this.#o.minimum),this.shadowRoot.getElementById("value").textContent=t;var o=this.shadowRoot.querySelector("svg").createSVGTransform();o.setRotate(e,0,0),this.shadowRoot.querySelector("#needle").transform.baseVal.replaceItem(o,1)}}</script>