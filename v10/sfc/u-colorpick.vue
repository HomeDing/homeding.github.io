<template><label><input value='#FFFFFF'type='color'><div class='code'>#FFEx00</div><div class='pad'></div></label></template><style scoped>:host{display:inline-block;height:1lh;width:11ch;vertical-align:text-bottom}label{position:absolute;display:grid;grid-template-columns:auto auto;grid-gap:0.2em;font-family:'Courier New',Courier,monospace;font-weight:700}input{display:none}.pad{border-radius:100%;aspect-ratio:1;border:1px solid #000}</style><script>export default class UColorPick extends UComponent{static observedAttributes=["value"];value="black";cssvar="";_hexColor(t){var e=document.createElement("canvas").getContext("2d");return e.strokeStyle=t,e.strokeStyle}init(){super.init(),this.cssvar=this.getAttribute("cssvar");const t=this.shadowRoot.querySelector("input");if(t.addEventListener("change",(t=>{const e=t.target.value;this.value=e,this.setAttribute("value",e),this.dispatchEvent(new Event("change"))})),this.cssvar){const e=getComputedStyle(document.documentElement).getPropertyValue("--"+this.cssvar);this.debug(`col=${e}`),t.setAttribute("value",e),this.setAttribute("value",e)}}attributeChangedCallback(t,e,s){if(this.debug("attributeChanged",t,e,s),this.cssvar=this.getAttribute("cssvar"),"value"===t){const t=this.shadowRoot,e=t.querySelector(".code"),r=t.querySelector(".pad"),o=t.querySelector("input");s?(r.style.backgroundColor=s,s=this._hexColor(r.style.backgroundColor),this.debug(s),o.setAttribute("value",s),e.textContent=s,this.cssvar&&document.querySelector(":root").style.setProperty("--"+this.cssvar,s)):(r.style.backgroundColor="silver",e.textContent="(none)")}}}</script>