
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Temperature display</title>
  <script src="/pages.js"></script>
  <link content-type="text/css" href="/docstyle.css" rel="stylesheet">
  <script src="/story.js" type="module"></script>
  <link rel="icon" type="image/png" href="/favicon48.png" sizes="48x48">
  <meta name="description" content="Examples and documentation for the HomeDing IoT Library">
  <meta name="google-site-verification" content="7tTF0t5uCMnyE6X31OIOQpcOf4QxWuODtyZLoVsKCEc">
  <meta name="msvalidate.01" content="7FC9C7BCD4002EBD89AAC2EF63D7B353">
</head>

<body class="sitelayout">
  <div class="navbar">
    <button id="menu" popovertarget="my-menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
        <path fill="white" d="M0 8h48v6H0zm0 13h48v6H0zm0 13h48v6H0z"></path>
      </svg>
    </button>
    <a href="/index.htm" class="button">Home</a>
    <a href="/elements/index.htm" class="button">Elements</a>
    <a href="/boards/index.htm" class="button">Boards</a>
    <a href="/recipes/index.htm" class="button">Recipes</a>
    
  </div>
  
  <nav popover="auto" id="my-menu" class="menu"></nav>

  <main>
    <h1>Temperature display</h1>

    

    <p>This recipe implements a device with a locally attached LCD display to show time temperature and humidity from a BME680 sensor.</p>
<p><img src="/recipes/tempdisplayflow.png" alt="Elements used in led recipe"></p>
<h2>System Configuration</h2>
<p>There is a configuration for the LCD display required. Here a HD44780 standard LCD display on the I2C bus is used.</p>
<ul>
<li>In the <a href="/elements/device.htm">Device Element</a> configuration the i2c pins must be specified. Here only these 2 properties are shown.</li>
<li>The <a href="/elements/display/lcd.htm">DisplayLCD Element</a> is defined with the i2c address and LCD size.</li>
<li>The <a href="/elements/ntptime.htm">NTPTime Element</a> is used to retrieve the actual time from the default ntp server.</li>
</ul>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"device"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"i2c-scl"</span><span class="token operator">:</span> <span class="token string">"D1"</span><span class="token punctuation">,</span>
      <span class="token property">"i2c-sda"</span><span class="token operator">:</span> <span class="token string">"D2"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"displaylcd"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"HD44780 LCD Display"</span><span class="token punctuation">,</span>
      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"0x27"</span><span class="token punctuation">,</span>
      <span class="token property">"lines"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">"columns"</span> <span class="token operator">:</span> <span class="token number">16</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"ntptime"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"zone"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
      <span class="token property">"readtime"</span><span class="token operator">:</span> <span class="token string">"04:00:00"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>This is specified typically in the env.json file that holds all the configurations for the board and the directly connected actors, sensors and displays.
Samples for this configuration can be found in the description of the display elements and some board descriptions.</p>
<p>See also <a href="/elements/display/index.htm">displays</a> for a list of the supported displays.</p>
<p>Having done this configuration the display will also be used on system startup showing the device-name and the assigned ip-address.</p>
<h2>Display elements</h2>
<p>The configuration used 3 display elements for text to define the position and size of the information that will be shown:</p>
<h2>Time events</h2>
<p>Based on the time given from the <a href="/elements/ntptime.htm">NTPTime Element</a> the <a href="/elements/time.htm">Time Element</a> creates an action every second to update the time displayed on the LCD.</p>
<h2>BME680 sensor</h2>
<p>The BME680 sensor measures the temperature and humidity every 10 seconds and sends actions whenever the values have changed.
These are used to update the displaytext elements.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"displaytext"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"time"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"x"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>
      <span class="token property">"y"</span><span class="token operator">:</span> <span class="token string">"0"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"temp"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"x"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>
      <span class="token property">"y"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"--.--"</span><span class="token punctuation">,</span>
      <span class="token property">"postfix"</span><span class="token operator">:</span> <span class="token string">"\u00dfC"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"hum"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"x"</span><span class="token operator">:</span> <span class="token string">"8"</span><span class="token punctuation">,</span>
      <span class="token property">"y"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"--.--"</span><span class="token punctuation">,</span>
      <span class="token property">"postfix"</span><span class="token operator">:</span> <span class="token string">"%"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"time"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"t"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"send actual time to displaytext"</span><span class="token punctuation">,</span>
      <span class="token property">"ontime"</span><span class="token operator">:</span> <span class="token string">"displaytext/time?value=$v"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"bme680"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"bd"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"0x77"</span><span class="token punctuation">,</span>
      <span class="token property">"readtime"</span><span class="token operator">:</span> <span class="token string">"10s"</span><span class="token punctuation">,</span>
      <span class="token property">"ontemperature"</span><span class="token operator">:</span> <span class="token string">"displaytext/temp?value=$v"</span><span class="token punctuation">,</span>
      <span class="token property">"onhumidity"</span><span class="token operator">:</span> <span class="token string">"displaytext/hum?value=$v"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span></code></pre>
<h2>See also</h2>
<ul>
<li><a href="/elements/device.htm">Device Element</a></li>
<li><a href="/elements/ntptime.htm">NTPTime Element</a></li>
<li><a href="/elements/display/lcd.htm">DisplayLCD Element</a></li>
<li><a href="/elements/display/text.htm">DisplayText Element</a></li>
<li><a href="/elements/time.htm">Time Element</a></li>
<li><a href="/elements/bme680.htm">BME680 Element</a></li>
</ul>


      
        <h2>Tags</h2>
        <div class="taglist"><a href="/tag/recipe.htm">Recipe</a></div>
      
  </main>

  <script>
    

    var navObj = document.querySelector('nav');
    lazyLoadHTM('nav', '/toc.htm');
  </script>

</body>
</html>