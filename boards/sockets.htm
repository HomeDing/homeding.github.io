<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="7tTF0t5uCMnyE6X31OIOQpcOf4QxWuODtyZLoVsKCEc" />
  <meta name="msvalidate.01" content="7FC9C7BCD4002EBD89AAC2EF63D7B353" />
  <link rel="icon" type="image/png" href="favicon48.png" sizes="48x48">
  <meta name='description' content='Examples and documentation for the HomeDing IoT Library'>
  <title>Retail Plug and Socket Devices</title>
  <link Content-Type="text/css" href="/docstyle.css" rel="stylesheet" />
  <script src="/pages.js"></script>
  <script src="/story.js" type="module"></script>
  <style>
  .gpio { 
    display:inline-block;
    padding: 0 4px;
    border-radius: 4px;
    }
  .gpio.yellow {background-color: #FF0;}
  .gpio.red {background-color: #F22; color:white}
  .gpio.black {background-color: #111; color:white}
  .gpio.blue {background-color: #22F; color:white}
  </style>
</head>

<body scroll="0" style="padding:0;">
  <div class="u-navbar" style="margin-bottom: 0;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="menuButton" class="button" style="height:1.4rem">
      <path fill="white" d="M0 8h48v6H0zm0 13h48v6H0zm0 13h48v6H0z" />
    </svg>

    <a href="/index.htm" class="button">Home</a>
    <a href="/concepts/index.htm" class="button">Concepts</a>
    <a href="/elements/index.htm" class="button">Elements</a>
    <a href="/boards/index.htm" class="button">Boards</a>
    <a href="/recipes/index.htm" class="button">Recipes</a>
  </div>

  <nav class="inpage open"></nav>

  <main style="padding:1rem;max-width: 800px;">
    <h1>Retail Plug and Socket Devices</h1>

    
    
      <div class="plaincard">
    
    There are many devices on the market that use the ESP8266 chip to control main power by internal relays. The [Minimal Sketch](/examples/minimal.md) supports these use cases.
</div>
      
    <p><strong>Tuya</strong> is a manufacturer and provider of IoT devices using the ESP8266 chip. This company is the manufacturer of many IoT devices.</p>
<p>The TASMOTA firmware implementation is one with constant support to even new devices from other brands and when TASMOTA supports the device it likely has a ESP8266 inside.</p>
<h2>Gosund SP111 also from Blitzwolf</h2>
<p><img src="/boards/sockets.jpg" alt="sp111 socket" title="w200">
<img src="/boards/socket-sp111-01.jpg" alt="sp111 socket" title="w200">
<img src="/boards/socket-sp111-02.jpg" alt="sp111 socket" title="w200">
<img src="/boards/socket-sp111-03.jpg" alt="sp111 socket" title="w200"></p>
<p>The documentation on the devices to flash the TASMOTA firmware also has some hints on the GPIO functionality and the supported features and a picture for identification.</p>
<p>There is a input button, 2 LEDs in red and blue, a relay and a power measurement chip included in this device. The input button, LEDs and the relay can directly be used by digital in and out to create a remote switch.</p>
<p>The power measurement chip is from type <a href="/elements/bl0937.htm">BL0937</a> that can be found in many plug devices.</p>
<ul>
<li><a href="http://wiki.gorjup.de/doku.php?id=public:fhem_blitzwolf_flasher">http://wiki.gorjup.de/doku.php?id=public:fhem_blitzwolf_flasher</a></li>
<li><a href="https://www.malachisoord.com/2019/11/24/flashing-custom-firmware-on-a-gosund-sp111/">https://www.malachisoord.com/2019/11/24/flashing-custom-firmware-on-a-gosund-sp111/</a></li>
</ul>
<table>
<thead>
<tr>
<th>GPIO#</th>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPIO0(D3)</td>
<td>led-red</td>
<td>defined by configuration</td>
</tr>
<tr>
<td>GPIO2(D4)</td>
<td>led-blue</td>
<td>defined by configuration</td>
</tr>
<tr>
<td>GPIO4(D2)</td>
<td>HLWBL CF1</td>
<td>Current and Voltage</td>
</tr>
<tr>
<td>GPIO5(D1)</td>
<td>BL0937 CF</td>
<td>Power</td>
</tr>
<tr>
<td>GPIO12(D6)</td>
<td>HLWBL SEL</td>
<td>chip select</td>
</tr>
<tr>
<td>GPIO13(D7)</td>
<td>Button1</td>
<td>Button press (active LOW)</td>
</tr>
<tr>
<td>GPIO15(D8)</td>
<td>Relay1</td>
<td>Relay (active LOW)</td>
</tr>
</tbody>
</table>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"device"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"loglevel"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>      <span class="token property">"safemode"</span><span class="token operator">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span><br>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"plug01"</span><span class="token punctuation">,</span><br>      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Gosund SP111 with minimal sketch"</span><span class="token punctuation">,</span><br>      <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"/ding.htm"</span><span class="token punctuation">,</span><br>      <span class="token property">"led"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span><br>      <span class="token property">"button"</span><span class="token operator">:</span> <span class="token string">"13"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"ota"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">8266</span><span class="token punctuation">,</span><br>      <span class="token property">"passwd"</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span><br>      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Listen for 'over the air' OTA Updates"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"digitalin"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"button"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"13"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"pullup"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"onLow"</span><span class="token operator">:</span> <span class="token string">"switch/relay?toggle=1"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"schedule"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Timer"</span><span class="token punctuation">,</span><br>      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span><br>      <span class="token property">"onTime"</span><span class="token operator">:</span> <span class="token string">"20:00:00"</span><span class="token punctuation">,</span><br>      <span class="token property">"offTime"</span><span class="token operator">:</span> <span class="token string">"22:22:22"</span><span class="token punctuation">,</span><br>      <span class="token property">"onOn"</span><span class="token operator">:</span> <span class="token string">"switch/relay?value=1"</span><span class="token punctuation">,</span><br>      <span class="token property">"onOff"</span><span class="token operator">:</span> <span class="token string">"switch/relay?value=0"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"switch"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"relay"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Aufgang Licht"</span><span class="token punctuation">,</span><br>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>      <span class="token property">"onValue"</span><span class="token operator">:</span> <span class="token string">"digitalout/relay?value=$v,digitalout/led?value=$v"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"digitalout"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"relay"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"15"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token string">"false"</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"led"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token string">"true"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"bl0937"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"selpin"</span><span class="token operator">:</span> <span class="token string">"12"</span><span class="token punctuation">,</span><br>      <span class="token property">"cfpin"</span><span class="token operator">:</span> <span class="token string">"5"</span><span class="token punctuation">,</span><br>      <span class="token property">"cf1pin"</span><span class="token operator">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span><br>      <span class="token property">"cycletime"</span><span class="token operator">:</span> <span class="token string">"2000"</span><span class="token punctuation">,</span><br>      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"voltage"</span><span class="token punctuation">,</span><br>      <span class="token property">"powerfactor"</span><span class="token operator">:</span> <span class="token string">"1346829"</span><span class="token punctuation">,</span><br>      <span class="token property">"currentfactor"</span><span class="token operator">:</span> <span class="token string">"11232182"</span><span class="token punctuation">,</span><br>      <span class="token property">"voltagefactor"</span><span class="token operator">:</span> <span class="token string">"130924"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span>```<br><br><br>## Nous A1 / Nous A1T<br><br>Using a Nous socket is almost the same setup but some pins are used differently.<br><br>Also a HLW8012 is used inside with varying factors for power<span class="token punctuation">,</span> current and voltage.<br><br>``` json<br><span class="token punctuation">{</span><br>  <span class="token property">"device"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"noussocket"</span><span class="token punctuation">,</span><br>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Nous Socket"</span><span class="token punctuation">,</span><br>      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Switchable plug with power meter"</span><span class="token punctuation">,</span><br>      <span class="token property">"led"</span><span class="token operator">:</span> <span class="token string">"13"</span><span class="token punctuation">,</span><br>      <span class="token property">"button"</span><span class="token operator">:</span> <span class="token string">"0"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> ...<br><span class="token punctuation">}</span></code></pre>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"digitalin"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"button"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"pullup"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br>      <span class="token property">"onLow"</span><span class="token operator">:</span> <span class="token string">"switch/relay?toggle=1"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"switch"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"relay"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>      <span class="token property">"onValue"</span><span class="token operator">:</span> <span class="token string">"digitalout/relay?value=$v,digitalout/led?value=$v"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"digitalout"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"relay"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"14"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token string">"false"</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"led"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"13"</span><span class="token punctuation">,</span><br>      <span class="token property">"inverse"</span><span class="token operator">:</span> <span class="token string">"true"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"bl0937"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"loglevel"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br>      <span class="token property">"selpin"</span><span class="token operator">:</span> <span class="token string">"12"</span><span class="token punctuation">,</span><br>      <span class="token property">"cfpin"</span><span class="token operator">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span><br>      <span class="token property">"cf1pin"</span><span class="token operator">:</span> <span class="token string">"5"</span><span class="token punctuation">,</span><br>      <span class="token property">"cycletime"</span><span class="token operator">:</span> <span class="token string">"2000"</span><span class="token punctuation">,</span><br>      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"voltage"</span><span class="token punctuation">,</span><br>      <span class="token property">"powerfactor"</span><span class="token operator">:</span> <span class="token string">"1713292"</span><span class="token punctuation">,</span><br>      <span class="token property">"currentfactor"</span><span class="token operator">:</span> <span class="token string">"12972030"</span><span class="token punctuation">,</span><br>      <span class="token property">"voltagefactor"</span><span class="token operator">:</span> <span class="token string">"142060"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2>See also</h2>
<ul>
<li>Power measurement chip <a href="/elements/bl0937.htm">BL0937</a></li>
</ul>
<!-- 
##  Relay


Sonoff ITEAD Smart Home WLAN Wireless Switch Module für Apple Android APP Control

https://www.heise.de/newsticker/meldung/Smart-Home-Hack-Tuya-veroeffentlicht-Sicherheitsupdate-4292028.html

## more

* <https://github.com/arendst/Sonoff-Tasmota/wiki/Tuya-OTA>
* <https://creationx.de/ratgeber/sonoff/tasmota>
* <http://www.andremiller.net/content/programming-an-itead-sonoff-wireless-smart-switch-esp8266>
* <https://blog.moneybag.de/fhem-kurztest-gosund-blitzwolf-wlan-steckdosen/>

-->


    
    <h2>Tags</h2>
    <div class="taglist"><a href="/tag/board.htm">Board</a></div>
    
  </main>

  <script>
    var mbObj = document.querySelector('#menuButton');
    var navObj = document.querySelector('nav');

    navObj.classList.toggle('open', (window.innerWidth > 880));

    mbObj.addEventListener('click', function (e) {
      navObj.classList.toggle('open');
    });

    lazyLoadHTM('nav', '/toc.htm');
  </script>
  
  </body>

</html>