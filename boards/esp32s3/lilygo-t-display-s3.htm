
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LilyGO T-Display-S3</title>
  <script src="/pages.js"></script>
  <link content-type="text/css" href="/docstyle.css" rel="stylesheet">
  <script src="/story.js" type="module"></script>
  <link rel="icon" type="image/png" href="/favicon48.png" sizes="48x48">
  <meta name="description" content="ESP32-S3 board with integrated TFT color display.">
  <meta name="google-site-verification" content="7tTF0t5uCMnyE6X31OIOQpcOf4QxWuODtyZLoVsKCEc">
  <meta name="msvalidate.01" content="7FC9C7BCD4002EBD89AAC2EF63D7B353">
</head>

<body class="sitelayout">
  <div class="navbar">
    <button id="menu" popovertarget="my-menu">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
        <path fill="white" d="M0 8h48v6H0zm0 13h48v6H0zm0 13h48v6H0z"></path>
      </svg>
    </button>
    <a href="/index.htm" class="button">Home</a>
    <a href="/elements/index.htm" class="button">Elements</a>
    <a href="/boards/index.htm" class="button">Boards</a>
    <a href="/recipes/index.htm" class="button">Recipes</a>
    
  </div>
  
  <nav popover="auto" id="my-menu" class="menu"></nav>

  <main>
    <h1>LilyGO T-Display-S3</h1>

    
      <div class="card-container horizontal text" style="--card-height:5rem;--card-image-size:5rem;">
        <div class="card">
          
          <div class="body">
            <p>The LilyGO T-Display-S3 board has an integrated TFT color display <strong>with</strong> optional capacitive touch and a USB-C type connector.</p>

          </div>
        </div>
      </div>
    

    <p>The T-Display-S3 is a <a href="/boards/esp32s3/index.htm">ESP32-S3</a> based development with a 1.9&quot; IPS LCD color touch screen and two
separate momentary buttons. Communication to the display is using a fast 8 bit interface. The USB-C board is supported by the
ESP32-S3 chip.</p>
<p><img src="/boards/esp32s3/lilygo-t-display-s3.jpg" alt="TTGO T-Display"></p>
<h2>Arduino Board Configuration</h2>
<p>The board is known in the list of predefined board configurations for esp32 by espresif.
It can be used with the following Arduino settings:</p>
<ul>
<li>Package: esp32 by Espressif</li>
<li>Board: LilyGO T-Display-S3</li>
</ul>
<p>The following board settings can be used:</p>
<ul>
<li>JTAG Adapter: Disbled</li>
<li>Arduino Runs On: Core 1</li>
<li>Events Runs On: Core 1</li>
<li>USB Mode: Hardware CDC amd JTAG</li>
<li>USB CDC On Boot: Enabled</li>
<li>USB Firmware MSC on Boot: Disabled</li>
<li>USB DFU on Boot: Disabled</li>
<li>Upload Mode: UAT0 / Hardware CDC</li>
<li>Partition Scheme: 16M Flash (3MB APP/9.9MB FATS)</li>
<li>Core Debug Level: None</li>
<li>Erase All Flash: Disabled</li>
</ul>
<p>For the Arduino-CLI the following boardname and build properties can be used:</p>
<pre class="language-bash"><code class="language-bash">fqbn <span class="token operator">=</span> <span class="token string">"esp32:esp32:lilygo_t_display_s3"</span>
properties <span class="token operator">=</span> <span class="token string">"JTAGAdapter=default,LoopCore=1,EventsCore=1,USBMode=hwcdc,CDCOnBoot=cdc,MSCOnBoot=default,
  DFUOnBoot=default,UploadMode=default,PartitionScheme=app3M_fat9M_16MB,DebugLevel=none,EraseFlash=none"</span></code></pre>
<h2>Display ST7789</h2>
<p>The display is a IPS type TFT display using the ST7789 driver chip on the SPI bus. It is
supported by the <code>GFX Library for Arduino</code>.</p>
<p>The board supports a display resolution of 170*320 pixels in 64k colors in RGB565 addressing.</p>
<p>The background lightning can be adjusted using PWM based LED control on pin GPIO38.</p>
<h2>Touch CST816</h2>
<p>The touch screen is using the CST816 chip that is supported by the
<a href="/elements/display/touchcst816.htm">Display TouchCST816 Element</a>. Is is using the <a href="/dev/i2c.htm">i2c bus</a> as an interface and the
SCL and SDA pins must be specified in the <a href="/elements/device.htm">device element</a> configuration.</p>
<p>The touch controller goes beyond the graphics surface and when touching the soft button marked with a circle below the display
the touch controller reports a touch event on location ???</p>
<h2>Buttons</h2>
<p>The board is equipped with 3 momentary buttons:</p>
<ul>
<li>The reset button is reachable at the side of the main board.</li>
<li>The Boot button is connected to GPIO0 as usual. It is located <strong>???</strong> left to the USB-C port.</li>
<li>THe Key Button is connected to GPIO14 and is located <strong>???</strong> left to the USB-C port.</li>
</ul>
<p>The Key button and the Boot button can be used for functional purpose when the device has booted.</p>
<h2>Power</h2>
<p>The board can be powered through the USB-C connector. It does not support the complete USB-C specification, especially not the
USB-C voltage negotiation protocol and a USB2.0 USB-A to USB-C cable must be used.</p>
<p>The board can run by using the power from a 3.7 V LiPo battery pack attached to the JST-GH 1.25mm 2pin connector on the board.
There is a LiPo charger chip that loads the battery.</p>
<p>The time the device can run on batter power supply depends on the given LiPo capacity. As the display is the most power
consuming part of the device this is switched off on battery mode (no power provided by USB-C).</p>
<p>The battery mode can be controlled by 2 pins:</p>
<p><strong>GPIO15</strong> – This pin can enable the power to the display on battery. When the pin is pulled high the 3.3 volt is given to the
display and the green LED on the board. A <a href="/elements/digitalout.htm">Digital Output Element</a> can be used to control this signal.
It takes a few milliseconds until the display is really on.</p>
<p>There is a recipe below that uses the menu touch button to trigger a timer so the display is on for some seconds when needed.</p>
<p><strong>GPIO4</strong> – This pin can be used to messure the current battery voltage. When in battery mode and GPIO is not enabling the
display power the voltage is not enable. This is in contrast to the existing board schema.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"analog"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"bat"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Battery power"</span><span class="token punctuation">,</span>
      <span class="token property">"readtime"</span><span class="token operator">:</span> <span class="token string">"1s"</span><span class="token punctuation">,</span>
      <span class="token property">"hysteresis"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
      <span class="token property">"onvalue"</span><span class="token operator">:</span> <span class="token string">"device/0?log=bat-$v"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2>Example env.json Device Configuration</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"device"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"tdisplays3"</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"LilyGO T-Display-S3"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"LilyGO T-Display-S3R8 with capacitive touch"</span><span class="token punctuation">,</span>
      <span class="token property">"loglevel"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>
      <span class="token property">"logfile"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"safemode"</span><span class="token operator">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span>
      <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"/board.htm"</span><span class="token punctuation">,</span>
      <span class="token property">"xcache"</span><span class="token operator">:</span> <span class="token string">"etag"</span><span class="token punctuation">,</span>
      <span class="token property">"i2c-SDA"</span><span class="token operator">:</span> <span class="token string">"18"</span><span class="token punctuation">,</span>
      <span class="token property">"i2c-SCL"</span><span class="token operator">:</span> <span class="token string">"17"</span><span class="token punctuation">,</span>
      <span class="token property">"battery_volt"</span><span class="token operator">:</span> <span class="token string">"4"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">"ota"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">"DisplayST7789"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"width"</span><span class="token operator">:</span> <span class="token string">"170"</span><span class="token punctuation">,</span>
      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"320"</span><span class="token punctuation">,</span>
      <span class="token property">"rotation"</span><span class="token operator">:</span> <span class="token string">"270"</span><span class="token punctuation">,</span>

      <span class="token property">"busmode"</span><span class="token operator">:</span> <span class="token string">"par8"</span><span class="token punctuation">,</span>
      <span class="token property">"buspins"</span><span class="token operator">:</span> <span class="token string">"39, 40, 41, 42, 45, 46, 47, 48"</span><span class="token punctuation">,</span>
      <span class="token property">"ips"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"rowOffset"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">"colOffset"</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
      <span class="token property">"resetpin"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">"lightpin"</span><span class="token operator">:</span> <span class="token number">38</span><span class="token punctuation">,</span>
      <span class="token property">"cspin"</span><span class="token operator">:</span> <span class="token string">"6"</span><span class="token punctuation">,</span>
      <span class="token property">"dcpin"</span><span class="token operator">:</span> <span class="token string">"7"</span><span class="token punctuation">,</span>
      <span class="token property">"wrpin"</span><span class="token operator">:</span> <span class="token string">"8"</span><span class="token punctuation">,</span>
      <span class="token property">"rdpin"</span><span class="token operator">:</span> <span class="token string">"9"</span><span class="token punctuation">,</span>

      <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
      <span class="token property">"border"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
      <span class="token property">"background"</span><span class="token operator">:</span> <span class="token string">"#cccccc"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token property">"DisplayTouchCST816"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"width"</span><span class="token operator">:</span> <span class="token string">"170"</span><span class="token punctuation">,</span>
      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"320"</span><span class="token punctuation">,</span>
      <span class="token property">"rotation"</span><span class="token operator">:</span> <span class="token string">"270"</span><span class="token punctuation">,</span>
      <span class="token property">"resetpin"</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">"interruptpin"</span><span class="token operator">:</span> <span class="token number">16</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2>Enable the display on Battery mode</h2>
<p>On battery mode the display will not get the VCC automatically.
The GPIO15 port can be used to enable power for some time to save energy while not in use.</p>
<p>To enable the display even on startup the “digitalout/lcd” element must be configured before the display by using the system
startup.</p>
<pre class="language-JSON"><code class="language-JSON">{
  "digitalout": {
    "lcd": {
      "pin": "15",
      "startup": "sys",
      "title": "Display Power control",
      "value": "1"
    }
  }
}</code></pre>
<p>The touch controller element</p>
<p>Here the touch event from the touch element that is triggered on any touch will start the timer that enables GPIO15 for 8 seconds.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"DisplayTouchCST816"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ...
      <span class="token property">"ontouch"</span><span class="token operator">:</span> <span class="token string">"timer/lcd?start=1"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"timer"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lcd"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"loglevel"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Display Power timer"</span><span class="token punctuation">,</span>
      <span class="token property">"pulsetime"</span><span class="token operator">:</span> <span class="token string">"8s"</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"timer/lcd"</span><span class="token punctuation">,</span>
      <span class="token property">"onvalue"</span><span class="token operator">:</span> <span class="token string">"digitalout/lcd?value=$v"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"digitalout"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lcd"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"pin"</span><span class="token operator">:</span> <span class="token string">"15"</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Display Power control"</span><span class="token punctuation">,</span>
      <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"1"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2>Use the Menu touch button</h2>
<p>Below the display there is a circle drawn on the display that can be touched. This creates a touch event at position 85/-40. When the display and touch is rotated, the coordinates must be adapted.</p>
<p>A displaybutton outside the visible display box can be declared to capture these touch events to trigger an action:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"displaybutton"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"menu"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"x"</span><span class="token operator">:</span> <span class="token string">"85"</span><span class="token punctuation">,</span>
      <span class="token property">"y"</span><span class="token operator">:</span> <span class="token string">"-40"</span><span class="token punctuation">,</span>
      <span class="token property">"w"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"h"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"onclick"</span><span class="token operator">:</span> <span class="token string">"device/0?log=menu"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2>See Also</h2>
<ul>
<li>
<p><a href="https://www.lilygo.cc/products/t-display-s3">https://www.lilygo.cc/products/t-display-s3</a></p>
</li>
<li>
<p><a href="https://github.com/Xinyuan-LilyGO/T-Display-S3">https://github.com/Xinyuan-LilyGO/T-Display-S3</a></p>
</li>
<li>
<p><a href="https://github.com/teastainGit/LilyGO-T-display-S3-setup-and-examples">https://github.com/teastainGit/LilyGO-T-display-S3-setup-and-examples</a></p>
</li>
<li>
<p><a href="https://spotpear.com/index/product/detail/id/1235.html">T Dongle S3 at spotpear</a></p>
</li>
<li>
<p><a href="/elements/display/index.htm">Display Elements</a></p>
</li>
<li>
<p><a href="/elements/display/st7789.htm">Display ST7789 Element</a></p>
</li>
<li>
<p><a href="/elements/display/touchcst816.htm">Display TouchCST816 Element</a></p>
</li>
<li>
<p><a href="/dev/i2c.htm">I2C bus</a></p>
</li>
<li>
<p><a href="http://www.lilygo.cn/prod_view.aspx?TypeId=50062&amp;Id=1400&amp;FId=t3:50062:3">http://www.lilygo.cn/prod_view.aspx?TypeId=50062&amp;Id=1400&amp;FId=t3:50062:3</a></p>
</li>
<li>
<p><a href="https://github.com/Xinyuan-LilyGO/TTGO-T-Display">https://github.com/Xinyuan-LilyGO/TTGO-T-Display</a></p>
</li>
</ul>


      
        <h2>Tags</h2>
        <div class="taglist"><a href="/tag/board.htm">Board</a></div>
      
  </main>

  <script>
    

    var navObj = document.querySelector('nav');
    lazyLoadHTM('nav', '/toc.htm');
  </script>

  <script type="module" async="">
    import mermaid from "https://unpkg.com/mermaid@10/dist/mermaid.esm.min.mjs";
    document.addEventListener('DOMContentLoaded', mermaid.initialize({startOnLoad: true}));
  </script>

</body>
</html>